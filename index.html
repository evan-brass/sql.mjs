<!DOCTYPE html>
<script type="module">
	import { register_vfs, open, create_scalar_func, make_sql, rows } from './dist/sql.mjs';
	import { SQLITE_DETERMINISTIC } from './dist/sqlite_def.mjs';
	import opfs from './dist/opfs.mjs';

	register_vfs(opfs, true);

	const conn = await open('test.db');
	create_scalar_func(conn, function test_func() { return "Big Heccin Cheers!"; }, {flags: SQLITE_DETERMINISTIC, nArgs: -1});
	create_scalar_func(conn, async function test_async() {
		await new Promise(res => setTimeout(res, 1000));
		return 5;
	});
	const sql = make_sql(conn);

	console.log(await rows(sql`SELECT test_func(randomblob(9))`));
</script>
